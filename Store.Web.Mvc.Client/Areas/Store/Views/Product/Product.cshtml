@using System.Activities.Expressions
@model Store.DomainModel.DTOs.ProductDetailsDto

@{
    ViewBag.Title = "Product";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="content_position">
    <div class="row row-backlink">
        <div class="span10" style="width: 780px;">
            <a class="back-link" style="color:#333;" href="javascript:window.history.back();"><i class="glyphicon glyphicon-menu-left"></i>Back to previous page</a>
        </div>
    </div>
    
    <div class="container-fluid">
        <div class="row">
            <div class="col-xs-5 col-xs-push-1">
                <div class="thumbnail fotorama">
                    <img class="img_product" src="@Model.ProductImageLargeUrl" alt="@Model.ProductName">
                </div>
            </div>
            <div class="col-xs-5 col-xs-offset-1">
                <h2>@Model.ProductName</h2>
                <p>@Model.ProductDescription</p>
                
                <form>
                    <input type="hidden" name="id" id="id" value="@Model.ProductId" />
                    <table>
                        @*<tr>
                                <td style="width: 300px; height: 35px;"><i class="@starClass"></i></td>
                                <td colspan="2">
                                    <div id="cart-alert" class="alert alert-success alert-add-cart">&nbsp;</div>
                                </td>
                            </tr>*@
                        <tr>
                            <td>Price:</td>
                            <td><span class="price_product">@Math.Round(Model.ProductPrice, 2)$</span></td>
                        </tr>
                        <tr>
                            <td>Now available:&nbsp;</td>
                            <td> @Math.Round(Model.ProductQuanity) pieces</td>
                        </tr>
                        <tr>
                            <td colspan="2">
                                <input class ="slider" type="text"
                                       name="countToCart"
                                       data-slider-min="1"
                                       data-slider-max="@Math.Round(Model.ProductQuanity)"
                                       data-slider-step="1"
                                       data-slider-value="1"
                                       data-slider-tooltip="show" />
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <button id="submit" class="btn btn-warning" style="margin-top: 0;">Add to Cart</button>
                            </td>
                            <td>
                                <select name="count" id="count" style="width: 60px;">
                                    @for (int i = 1; i <= Model.ProductQuanity; i++)
                                    {
                                        <option>@i</option>
                                    }
                                </select>
                            </td>
                        </tr>
                    </table>
                </form>
            </div>
        </div>
    </div>
</div>

@section Scripts
{
    <script type="text/javascript">

        $(function () {
            var slider = {};

            var countProductsList = $("#count")
                .change(function(e) {
                    slider.bootstrapSlider('setValue', countProductsList.val());
                });

            // Instantiate a slider
            slider = $("input.slider")
                .bootstrapSlider()
                .change(function (e) {
                    countProductsList.val(slider.bootstrapSlider('getValue'));
                });
        });
    </script>
}

